#!/bin/bash

# Example
# HIV-1 wild-type intasome core
# Details:
# - Protein Data Bank (PDB) Entry: 8W09
# - Reference: https://www.rcsb.org/structure/8W09

# Define filename and job name
FILENAME="paper_complex_system_cli.json"
JOB_NAME="paper_complex_system_cli_job"

# Sequence entries
# Homodimeric complex, therefore each sequence entry num=2
SEQUENCE_NUM=2

## Protein entries
INTEGRASE_INNER="\
FLDGIDKAQEEHEKYHSNWRAMASDFNLPPVVAKEIVASCDKCQLKGEAMHGQVDCSPGIWQLDCT\
HLEGKVILVAVHVASGYIEAEVIPAETGQETAYFLLKLAGRWPVKTVHTDNGSNFTSTTVKAACWW\
AGIKQEFGIPYNPQSQGVIESMNKELKKIIGQVRDQAEHLKTAVQMAVFIHNFKRKGGIGGYSAGE\
RIVDIIATDIQTKELQKQITKIQNFRVYYRGPAKLLWKGEGAVVIQDNSDIKVVPRRKAKII\
"
INTEGRASE_OUTER="\
LDGIDKAQEEHEKYHSNWRAMASDFNLPPVVAKEIVASCDKCQSPGIWQLDCTHLEGKVILVAVHV\
ASGYIEAEVIPAETGQETAYFLLKLAGRWPVKTVHTDNGSNFTSTTVKAACWWAGIKQEFGVIESM\
NKELKKIIGQVRDQAEHLKTAVQMAVFIHNFKRKGGIGGYSAGERIVDIIATDIQTKELQKQITKI\
QNFRVYYRWKGPAKLLWKGEGAVVIQDNSDIKVVPRRKAKIIRD\
"
INTEGRASE_SMALL_INNER="\
ELQKQITKIQNFRVYYRDSRDPVWKGPAKLLWKGEGAVVIQDNSDIKVVPRRKAKIIRDYGKQMA\
"
INTEGRASE_SMALL_OUTER="\
NFRVYYRDSRDPVWKGPAKLLWKGEGAVVIQDNSDIKVVPRRKAKII\
"

## DNA entries

VDNA_1="ACTGCTAGAGATTTTCCAC"
VDNA_2="GTGGAAAATCTCTAGCA"

# Ligands
DOLUTEGRAVIR="DLU"
DOLUTEGRAVIR_NUM=2

ZINC="ZN"
ZINC_NUM=2

MAGNESIUM="MG"
MAGNESIUM_NUM=4


# Run the CLI command
af3cli config --filename "${FILENAME}" --jobname "${JOB_NAME}" \
  - protein add --sequence "${INTEGRASE_INNER}" --num ${SEQUENCE_NUM} \
  - protein add --sequence "${INTEGRASE_OUTER}" --num ${SEQUENCE_NUM} \
  - protein add --sequence "${INTEGRASE_SMALL_INNER}" --num ${SEQUENCE_NUM} \
  - protein add --sequence "${INTEGRASE_SMALL_OUTER}" --num ${SEQUENCE_NUM} \
  - ligand add --ccd ${DOLUTEGRAVIR} --num ${DOLUTEGRAVIR_NUM} \
  - ligand add --ccd ${MAGNESIUM} --num ${MAGNESIUM_NUM} \
  - ligand add --ccd ${ZINC} --num ${ZINC_NUM} \
  - debug --show  # Exclude this line to enable .json file creation
